CREATE DATABASE mcst_elibrary_laptop_borrowing_system;
USE mcst_elibrary_laptop_borrowing_system;

-- Student Table
CREATE TABLE Student (
    Library_ID VARCHAR(15) PRIMARY KEY,
    Name VARCHAR(100) NOT NULL,
    Program VARCHAR(50) NOT NULL
);

INSERT INTO Student (Library_ID, Name, Program) VALUES
('S001', 'John Doe', 'Computer Science'),
('S002', 'Jane Smith', 'Information Technology'),
('S003', 'Michael Johnson', 'Electronics Engineering'),
('S004', 'Emily Davis', 'Software Engineering'),
('S005', 'Daniel Brown', 'Cybersecurity'),
('S006', 'Sophia Wilson', 'Data Science'),
('S007', 'James Martinez', 'Artificial Intelligence'),
('S008', 'Olivia Anderson', 'Business Analytics'),
('S009', 'William Thomas', 'Mechanical Engineering'),
('S010', 'Emma White', 'Civil Engineering'),
('S011', 'Benjamin Harris', 'Electrical Engineering'),
('S012', 'Ava Clark', 'Network Administration'),
('S013', 'Alexander Lewis', 'Game Development'),
('S014', 'Mia Walker', 'Multimedia Arts'),
('S015', 'Ethan Hall', 'Automotive Engineering'),
('S016', 'Charlotte Young', 'Robotics and Automation'),
('S017', 'Mason Allen', 'Information Systems'),
('S018', 'Amelia Scott', 'Software Development'),
('S019', 'Logan Wright', 'Telecommunication Engineering'),
('S020', 'Harper King', 'Digital Forensics'),
('S021', 'Lucas Green', 'Bioinformatics'),
('S022', 'Ella Baker', 'Aerospace Engineering'),
('S023', 'Jacob Adams', 'Environmental Engineering'),
('S024', 'Scarlett Nelson', 'Mathematics and Computing'),
('S025', 'Michael Carter', 'Physics and Computer Science'),
('S026', 'Penelope Mitchell', 'Computer Engineering'),
('S027', 'Henry Perez', 'Embedded Systems'),
('S028', 'Aria Roberts', 'Cloud Computing'),
('S029', 'Sebastian Rivera', 'Database Management'),
('S030', 'Chloe Carter', 'Cyber-Physical Systems'),
('S031', 'Jack Torres', 'Information Security'),
('S032', 'Grace Ramirez', 'Human-Computer Interaction'),
('S033', 'Lucas Gomez', 'Artificial Intelligence & ML'),
('S034', 'Avery Phillips', 'Software Quality Assurance'),
('S035', 'Elijah Hernandez', 'Blockchain Technology'),
('S036', 'Layla Campbell', 'Quantum Computing'),
('S037', 'Liam Parker', 'Ethical Hacking'),
('S038', 'Zoe Evans', 'Web Development'),
('S039', 'Nathan Edwards', 'Mobile App Development'),
('S040', 'Lillian Collins', 'Graphics Design'),
('S041', 'Dylan Stewart', 'Health Informatics'),
('S042', 'Hannah Morris', 'Digital Marketing'),
('S043', 'Caleb Rogers', 'Financial Technology'),
('S044', 'Sofia Reed', 'Computer Vision'),
('S045', 'Gabriel Cook', 'Data Analytics'),
('S046', 'Aurora Bell', 'Augmented Reality'),
('S047', 'Julian Murphy', '3D Animation'),
('S048', 'Stella Cooper', 'Big Data Management'),
('S049', 'Cameron Bailey', 'Internet of Things'),
('S050', 'Madison Foster', 'Game Programming');

-- Laptop Table
CREATE TABLE Laptop (
    Laptop_ID INT PRIMARY KEY AUTO_INCREMENT,
    Serial_Number VARCHAR(50) UNIQUE NOT NULL,
    Brand VARCHAR(50),
    Model VARCHAR(50),
    IP_Address VARCHAR(15) UNIQUE NOT NULL,
    Status ENUM('Available', 'Borrowed', 'Under Maintenance') NOT NULL DEFAULT 'Available',
    CHECK (Status IN ('Available', 'Borrowed', 'Under Maintenance'))
);

INSERT INTO Laptop (Serial_Number, Brand, Model, IP_Address, Status) VALUES
('SN1001', 'Dell', 'Latitude 5420', '192.168.1.2', 'Available'),
('SN1002', 'HP', 'EliteBook 840 G7', '192.168.1.3', 'Borrowed'),
('SN1003', 'Lenovo', 'ThinkPad T14', '192.168.1.4', 'Available'),
('SN1004', 'Acer', 'Aspire 5', '192.168.1.5', 'Under Maintenance'),
('SN1005', 'Asus', 'ZenBook 14', '192.168.1.6', 'Available'),
('SN1006', 'Apple', 'MacBook Air M1', '192.168.1.7', 'Borrowed'),
('SN1007', 'Microsoft', 'Surface Laptop 4', '192.168.1.8', 'Available'),
('SN1008', 'Razer', 'Blade 15', '192.168.1.9', 'Available'),
('SN1009', 'MSI', 'GF63 Thin', '192.168.1.10', 'Available'),
('SN1010', 'Samsung', 'Galaxy Book Pro', '192.168.1.11', 'Borrowed'),
('SN1011', 'Dell', 'XPS 13', '192.168.1.12', 'Available'),
('SN1012', 'HP', 'Spectre x360', '192.168.1.13', 'Available'),
('SN1013', 'Lenovo', 'Yoga 7i', '192.168.1.14', 'Under Maintenance'),
('SN1014', 'Acer', 'Swift 3', '192.168.1.15', 'Available'),
('SN1015', 'Asus', 'ROG Zephyrus G14', '192.168.1.16', 'Borrowed'),
('SN1016', 'Apple', 'MacBook Pro M2', '192.168.1.17', 'Available'),
('SN1017', 'Microsoft', 'Surface Book 3', '192.168.1.18', 'Available'),
('SN1018', 'Razer', 'Blade Stealth 13', '192.168.1.19', 'Under Maintenance'),
('SN1019', 'MSI', 'Prestige 14', '192.168.1.20', 'Available'),
('SN1020', 'Samsung', 'Galaxy Book Flex', '192.168.1.21', 'Available'),
('SN1021', 'Dell', 'Inspiron 15', '192.168.1.22', 'Available'),
('SN1022', 'HP', 'Pavilion 14', '192.168.1.23', 'Borrowed'),
('SN1023', 'Lenovo', 'IdeaPad 5', '192.168.1.24', 'Available'),
('SN1024', 'Acer', 'Nitro 5', '192.168.1.25', 'Available'),
('SN1025', 'Asus', 'VivoBook 15', '192.168.1.26', 'Under Maintenance'),
('SN1026', 'Apple', 'MacBook Air M2', '192.168.1.27', 'Available'),
('SN1027', 'Microsoft', 'Surface Go 3', '192.168.1.28', 'Borrowed'),
('SN1028', 'Razer', 'Blade 17', '192.168.1.29', 'Available'),
('SN1029', 'MSI', 'Modern 14', '192.168.1.30', 'Available'),
('SN1030', 'Samsung', 'Galaxy Chromebook', '192.168.1.31', 'Under Maintenance'),
('SN1031', 'Dell', 'Alienware m15', '192.168.1.32', 'Available'),
('SN1032', 'HP', 'Omen 15', '192.168.1.33', 'Available'),
('SN1033', 'Lenovo', 'Legion 5', '192.168.1.34', 'Available'),
('SN1034', 'Acer', 'Predator Helios 300', '192.168.1.35', 'Available'),
('SN1035', 'Asus', 'TUF Gaming A15', '192.168.1.36', 'Borrowed'),
('SN1036', 'Apple', 'MacBook Pro 16', '192.168.1.37', 'Available'),
('SN1037', 'Microsoft', 'Surface Laptop Studio', '192.168.1.38', 'Available'),
('SN1038', 'Razer', 'Blade Advanced', '192.168.1.39', 'Under Maintenance'),
('SN1039', 'MSI', 'Stealth 15M', '192.168.1.40', 'Available'),
('SN1040', 'Samsung', 'Notebook 9', '192.168.1.41', 'Available'),
('SN1041', 'Dell', 'Latitude 7410', '192.168.1.42', 'Available'),
('SN1042', 'HP', 'ZBook Firefly', '192.168.1.43', 'Borrowed'),
('SN1043', 'Lenovo', 'ThinkPad X1 Carbon', '192.168.1.44', 'Available'),
('SN1044', 'Acer', 'ConceptD 7', '192.168.1.45', 'Available'),
('SN1045', 'Asus', 'ProArt Studiobook', '192.168.1.46', 'Under Maintenance'),
('SN1046', 'Apple', 'MacBook Air Retina', '192.168.1.47', 'Available'),
('SN1047', 'Microsoft', 'Surface Pro 8', '192.168.1.48', 'Borrowed'),
('SN1048', 'Razer', 'Blade Base Model', '192.168.1.49', 'Available'),
('SN1049', 'MSI', 'Bravo 15', '192.168.1.50', 'Available'),
('SN1050', 'Toshiba', 'Dynabook R73', '192.168.1.51', 'Available');

-- Staff Table
CREATE TABLE Staff (
    Staff_ID INT PRIMARY KEY AUTO_INCREMENT,
    Name VARCHAR(50) NOT NULL,
    Position ENUM('Librarian', 'Assistant', 'Technician') NOT NULL
);

INSERT INTO Staff (Name, Position) VALUES
('John Doe', 'Librarian'),
('Jane Smith', 'Assistant'),
('Michael Johnson', 'Technician'),
('Emily Davis', 'Librarian'),
('Robert Brown', 'Technician'),
('Jessica Wilson', 'Assistant'),
('William Martinez', 'Librarian'),
('Sophia Anderson', 'Assistant'),
('Daniel Thomas', 'Technician'),
('Olivia Taylor', 'Librarian'),
('James Hernandez', 'Technician'),
('Emma Moore', 'Assistant'),
('Benjamin Clark', 'Librarian'),
('Mia Rodriguez', 'Assistant'),
('Alexander Lewis', 'Technician'),
('Charlotte Walker', 'Librarian'),
('Ethan Hall', 'Assistant'),
('Amelia Allen', 'Technician'),
('Mason Young', 'Librarian'),
('Harper King', 'Assistant'),
('Logan Wright', 'Technician'),
('Abigail Scott', 'Librarian'),
('Lucas Green', 'Assistant'),
('Ella Adams', 'Technician'),
('Jackson Baker', 'Librarian'),
('Avery Nelson', 'Assistant'),
('Sebastian Carter', 'Technician'),
('Madison Mitchell', 'Librarian'),
('Henry Perez', 'Assistant'),
('Scarlett Roberts', 'Technician'),
('Liam Campbell', 'Librarian'),
('Grace Edwards', 'Assistant'),
('Noah Rivera', 'Technician'),
('Zoe Flores', 'Librarian'),
('Elijah Morris', 'Assistant'),
('Lily Stewart', 'Technician'),
('Gabriel Sanchez', 'Librarian'),
('Aria Nguyen', 'Assistant'),
('Samuel Cooper', 'Technician'),
('Hannah Murphy', 'Librarian'),
('David Bryant', 'Assistant'),
('Victoria Cox', 'Technician'),
('Joseph Diaz', 'Librarian'),
('Penelope Howard', 'Assistant'),
('Matthew Ward', 'Technician'),
('Chloe Torres', 'Librarian'),
('Ryan Peterson', 'Assistant'),
('Natalie Gray', 'Technician'),
('Andrew Ramirez', 'Librarian'),
('Brooklyn James', 'Assistant');

-- Loan Table (Now tracks which staff processed it)
CREATE TABLE Loan (
    Loan_ID INT PRIMARY KEY AUTO_INCREMENT,
    Library_ID VARCHAR(15) NOT NULL,
    Laptop_ID INT NOT NULL,
    Staff_ID INT NULL, -- Staff member processing the loan (Nullable)
    Borrow_Date DATETIME DEFAULT CURRENT_TIMESTAMP,
    Due_Date DATETIME NOT NULL,
    Return_Date DATETIME NULL,
    Status ENUM('Borrowed', 'Returned', 'Overdue') NOT NULL DEFAULT 'Borrowed',
    FOREIGN KEY (Library_ID) REFERENCES Student(Library_ID) ON DELETE CASCADE,
    FOREIGN KEY (Laptop_ID) REFERENCES Laptop(Laptop_ID) ON DELETE CASCADE,
    FOREIGN KEY (Staff_ID) REFERENCES Staff(Staff_ID) ON DELETE SET NULL,
    CHECK (Status IN ('Borrowed', 'Returned', 'Overdue'))
);

INSERT INTO Loan (Library_ID, Laptop_ID, Staff_ID, Borrow_Date, Due_Date, Return_Date, Status) VALUES
('LIB001', 1, 3, '2024-03-01 09:00:00', '2024-03-08 17:00:00', '2024-03-07 15:30:00', 'Returned'),
('LIB002', 2, 5, '2024-03-02 10:30:00', '2024-03-09 17:00:00', '2024-03-10 12:00:00', 'Overdue'),
('LIB003', 3, NULL, '2024-03-03 14:45:00', '2024-03-10 17:00:00', NULL, 'Borrowed'),
('LIB004', 4, 2, '2024-03-04 08:00:00', '2024-03-11 17:00:00', '2024-03-11 16:45:00', 'Returned'),
('LIB005', 5, 6, '2024-03-05 11:15:00', '2024-03-12 17:00:00', NULL, 'Overdue'),
('LIB006', 6, 4, '2024-03-06 13:30:00', '2024-03-13 17:00:00', NULL, 'Borrowed'),
('LIB007', 7, 1, '2024-03-07 15:00:00', '2024-03-14 17:00:00', '2024-03-14 10:00:00', 'Returned'),
('LIB008', 8, NULL, '2024-03-08 16:45:00', '2024-03-15 17:00:00', NULL, 'Borrowed'),
('LIB009', 9, 3, '2024-03-09 10:00:00', '2024-03-16 17:00:00', NULL, 'Overdue'),
('LIB010', 10, 7, '2024-03-10 12:30:00', '2024-03-17 17:00:00', '2024-03-16 14:00:00', 'Returned'),
('LIB011', 11, 8, '2024-03-11 14:00:00', '2024-03-18 17:00:00', NULL, 'Borrowed'),
('LIB012', 12, NULL, '2024-03-12 09:30:00', '2024-03-19 17:00:00', '2024-03-19 16:30:00', 'Returned'),
('LIB013', 13, 9, '2024-03-13 11:45:00', '2024-03-20 17:00:00', NULL, 'Overdue'),
('LIB014', 14, 10, '2024-03-14 08:30:00', '2024-03-21 17:00:00', NULL, 'Borrowed'),
('LIB015', 15, 5, '2024-03-15 10:00:00', '2024-03-22 17:00:00', '2024-03-22 12:00:00', 'Returned'),
('LIB016', 16, 7, '2024-03-16 13:15:00', '2024-03-23 17:00:00', NULL, 'Overdue'),
('LIB017', 17, NULL, '2024-03-17 15:45:00', '2024-03-24 17:00:00', NULL, 'Borrowed'),
('LIB018', 18, 2, '2024-03-18 09:00:00', '2024-03-25 17:00:00', NULL, 'Overdue'),
('LIB019', 19, 4, '2024-03-19 11:30:00', '2024-03-26 17:00:00', '2024-03-26 15:45:00', 'Returned'),
('LIB020', 20, 1, '2024-03-20 14:45:00', '2024-03-27 17:00:00', NULL, 'Borrowed'),
('LIB021', 21, 6, '2024-03-21 08:15:00', '2024-03-28 17:00:00', NULL, 'Overdue'),
('LIB022', 22, 3, '2024-03-22 12:00:00', '2024-03-29 17:00:00', '2024-03-29 16:15:00', 'Returned'),
('LIB023', 23, NULL, '2024-03-23 10:30:00', '2024-03-30 17:00:00', NULL, 'Borrowed'),
('LIB024', 24, 8, '2024-03-24 14:00:00', '2024-03-31 17:00:00', NULL, 'Overdue'),
('LIB025', 25, 10, '2024-03-25 16:45:00', '2024-04-01 17:00:00', NULL, 'Borrowed'),
('LIB026', 26, 9, '2024-03-26 09:30:00', '2024-04-02 17:00:00', '2024-04-02 11:30:00', 'Returned'),
('LIB027', 27, 7, '2024-03-27 12:15:00', '2024-04-03 17:00:00', NULL, 'Overdue'),
('LIB028', 28, 5, '2024-03-28 08:45:00', '2024-04-04 17:00:00', NULL, 'Borrowed'),
('LIB029', 29, NULL, '2024-03-29 10:00:00', '2024-04-05 17:00:00', NULL, 'Overdue'),
('LIB030', 30, 6, '2024-03-30 14:30:00', '2024-04-06 17:00:00', '2024-04-06 13:45:00', 'Returned'),
('LIB031', 31, 1, '2024-04-01 08:00:00', '2024-04-07 17:00:00', NULL, 'Borrowed'),
('LIB032', 32, 3, '2024-04-02 12:45:00', '2024-04-08 17:00:00', NULL, 'Overdue'),
('LIB033', 33, 4, '2024-04-03 09:15:00', '2024-04-09 17:00:00', NULL, 'Borrowed'),
('LIB034', 34, NULL, '2024-04-04 15:30:00', '2024-04-10 17:00:00', '2024-04-10 10:15:00', 'Returned'),
('LIB035', 35, 8, '2024-04-05 11:45:00', '2024-04-11 17:00:00', NULL, 'Overdue'),
('LIB036', 36, 7, '2024-04-06 13:00:00', '2024-04-12 17:00:00', NULL, 'Borrowed'),
('LIB037', 37, 9, '2024-04-07 08:30:00', '2024-04-13 17:00:00', NULL, 'Overdue'),
('LIB038', 38, 10, '2024-04-08 10:45:00', '2024-04-14 17:00:00', '2024-04-14 12:30:00', 'Returned'),
('LIB039', 39, NULL, '2024-04-09 14:15:00', '2024-04-15 17:00:00', NULL, 'Borrowed'),
('LIB040', 40, 2, '2024-04-10 09:45:00', '2024-04-16 17:00:00', NULL, 'Borrowed'),
('LIB041', 41, 5, '2024-04-11 12:30:00', '2024-04-17 17:00:00', NULL, 'Overdue'),
('LIB042', 42, 7, '2024-04-12 15:00:00', '2024-04-18 17:00:00', '2024-04-18 11:00:00', 'Returned'),
('LIB043', 43, NULL, '2024-04-13 08:45:00', '2024-04-19 17:00:00', NULL, 'Borrowed'),
('LIB044', 44, 3, '2024-04-14 10:00:00', '2024-04-20 17:00:00', NULL, 'Overdue'),
('LIB045', 45, 8, '2024-04-15 14:15:00', '2024-04-21 17:00:00', '2024-04-21 12:00:00', 'Returned'),
('LIB046', 46, 10, '2024-04-16 11:30:00', '2024-04-22 17:00:00', NULL, 'Borrowed'),
('LIB047', 47, NULL, '2024-04-17 16:00:00', '2024-04-23 17:00:00', NULL, 'Overdue'),
('LIB048', 48, 9, '2024-04-18 09:00:00', '2024-04-24 17:00:00', '2024-04-24 13:30:00', 'Returned'),
('LIB049', 49, 6, '2024-04-19 13:45:00', '2024-04-25 17:00:00', NULL, 'Borrowed'),
('LIB050', 50, 4, '2024-04-20 15:30:00', '2024-04-26 17:00:00', NULL, 'Overdue');

-- Laptop Maintenance Table (Now includes maintenance notes)
CREATE TABLE Laptop_Maintenance (
    Maintenance_ID INT PRIMARY KEY AUTO_INCREMENT,
    Laptop_ID INT NOT NULL,
    Staff_ID INT NULL, -- Nullable in case a technician is not assigned yet
    Maintenance_Type ENUM('Software Update', 'Hardware Repair') NOT NULL,
    Maintenance_Date DATETIME DEFAULT CURRENT_TIMESTAMP,
    Status ENUM('Pending', 'Completed') NOT NULL DEFAULT 'Pending',
    Maintenance_Notes TEXT NULL, -- Optional field for extra notes on maintenance
    FOREIGN KEY (Laptop_ID) REFERENCES Laptop(Laptop_ID) ON DELETE CASCADE,
    FOREIGN KEY (Staff_ID) REFERENCES Staff(Staff_ID) ON DELETE SET NULL,
    CHECK (Status IN ('Pending', 'Completed'))
);